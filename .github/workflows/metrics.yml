name: "Generate clean GitHub metrics"

on:
  schedule:
    - cron: "0 */12 * * *" # Twice a day keeps the SVG fresh without spamming
  workflow_dispatch:

jobs:
  metrics:
    runs-on: ubuntu-latest
    steps:
      - name: Generate metrics
        uses: lowlighter/metrics@latest
        with:
          # Create a classic, compact card with only the essentials
          user: ImKyleJK
          filename: github-metrics.svg
          template: classic
          base: header, community, repositories
          config_order: base.header, base.community, base.repositories, isocalendar, languages
          config_timezone: UTC

          # Keep it tidy: contributions heatmap + most-used languages
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year

          plugin_languages: yes
          plugin_languages_sections: most-used
          plugin_languages_limit: 6
          plugin_languages_threshold: 2%
          plugin_languages_recent_days: 30
          plugin_languages_recent_load: 500
          plugin_languages_colors: github

          # Disable sections you don't want (habits, about, notable, skyline, activity, achievements)
          plugin_habits: no
          plugin_introduction: no
          plugin_notable: no
          plugin_skyline: no
          plugin_activity: no
          plugin_achievements: no

          # Explicitly disable noisy extras (Spotify/music, fortune quotes, etc.)
          plugin_music: no
          plugin_music_token: ""
          plugin_fortune: no

          # Access token with "public_repo" (and "read:org" if needed for org stats)
          token: ${{ secrets.METRICS_TOKEN }}
